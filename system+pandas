import pandas as pd
df = pd.read_csv('menu.csv')
menu = df.set_index("no.").to_dict(orient="index")

def show_menu():
    print("\n--- MENU ---")
    print(df.to_string(index=False))

def take_order():
    order = {}

    while True:
        show_menu()
        choice = input("\nEnter item number (or 'q' to checkout): ")

        if choice.lower() == 'q':
            break

        if not choice.isdigit() or int(choice) not in menu:
            print("Invalid choice. Try again.")
            continue

        quantity = input("Enter quantity: ")

        if not quantity.isdigit() or int(quantity) <= 0:
            print("Invalid quantity.")
            continue

        item_id = int(choice)
        quantity = int(quantity)

        if item_id in order:
            order[item_id] += quantity
        else:
            order[item_id] = quantity

        print(f"Added {quantity} x {menu[item_id]['name']}")

    return order

def calculate_total(order):
    total = 0
    print("\n--- ORDER SUMMARY ---")

    for item_id, qty in order.items():
        name = menu[item_id]["name"]
        price = menu[item_id]['price']
        subtotal = qty * price
        total += subtotal
        print(f"{name} x {qty} = {subtotal:.2f}")

    print(f"\nTotal Amount: RM {total:.2f}")
    return total

def main():
    print("Welcome to Simple Food Ordering System")
    order = take_order()

    if not order:
        print("\nNo items ordered.")
    else:
        calculate_total(order)
        print("\nThank you for ordering!")

if __name__ == "__main__":
    main()
